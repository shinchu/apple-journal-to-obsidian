# Apple Journal → Obsidian Daily Notes

A script to import Apple Journal HTML exports into Obsidian daily notes.

## Setup

### Obsidian Vault Path

Set the `JOURNAL_OBSIDIAN_VAULT` environment variable to your Obsidian vault path.

```bash
# Add to ~/.bashrc or ~/.zshrc
export JOURNAL_OBSIDIAN_VAULT="$HOME/path/to/your/vault"
```

### Vault Structure

```
YourVault/
├── .obsidian/
│   └── daily-notes.json    ← Auto-generated by Obsidian
├── Daily/                   ← Daily notes folder (configurable)
│   ├── 2025-12-04.md
│   ├── 2025-12-05.md
│   └── ...
├── Templates/               (optional)
│   └── Daily.md             ← Daily note template
└── ...
```

The script automatically reads the following from `.obsidian/daily-notes.json`:

- **`folder`** — Daily notes folder (default: `Daily`)
- **`template`** — Template file path for new notes

If a template is configured, new daily notes are created with the template content as a base, and the Apple Journal section is appended at the end. For existing daily notes, entries are simply appended.

## Usage

### 1. Export from Apple Journal

Export all entries from the Journal app on iPhone/Mac. The export produces an `Entries/*.html` structure.

### 2. Run the script

```bash
# Preview (no writes)
python3 import_journal.py --source ~/Downloads/AppleJournalEntries --dry-run

# Run
python3 import_journal.py --source ~/Downloads/AppleJournalEntries
```

Or use the shell wrapper:

```bash
./import_journal.sh ~/Downloads/AppleJournalEntries
```

The wrapper takes a source directory as an argument and runs in three steps: dry-run → confirm → execute.

### Options

| Option | Description | Default |
|---|---|---|
| `--source` | Path to the export folder | (required) |
| `--vault` | Path to the Obsidian vault | `JOURNAL_OBSIDIAN_VAULT` env var |
| `--dry-run` | Preview mode | `false` |

`--vault` takes precedence over the environment variable. An error is raised if neither is set.

## How It Works

- Reads `Entries/*.html` and converts English dates in `div.pageHeader` (e.g. "Friday, December 5, 2025") to `YYYY-MM-DD`
- Uses the pageHeader date as the source of truth (file name dates may be off by one day due to timezone differences)
- Creates or appends to daily notes for each date
- Entries with titles are rendered as `### Title`
- Multiple entries on the same day are separated by `---`
- Duplicate detection via `<!-- apple-journal: filename.html -->` markers prevents re-importing the same entry

## Example Output

Without template:

```markdown
## Apple Journal

<!-- apple-journal: 2025-12-04.html -->
Entry body text

---

<!-- apple-journal: 2025-12-04_(1).html -->
### Title

Second entry body text
```

With template (template content is preserved, journal entries appended after):

```markdown
## Memo

## Todo
- [ ]

## Apple Journal

<!-- apple-journal: 2025-12-04.html -->
Entry body text
```

## Limitations

Only text content is imported. Photos and other media files in `Resources/` are not processed.

## License

MIT

## Acknowledgments

Created using [Claude Code](https://claude.ai/claude-code).
